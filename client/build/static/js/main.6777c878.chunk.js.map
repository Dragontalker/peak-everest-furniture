{"version":3,"sources":["components/GlobalStore.js","components/Navbar.js","components/NavbarExtension.js","components/ShoppingCart.js","components/ShopPage/index.js","components/RegisterPage/index.js","components/LoginPage/index.js","components/ProductPage/index.js","components/AdminPage/AccessDenied.js","components/AdminPage/ProductList.js","components/AdminPage/TransactionsList.js","components/AdminPage/Charts.js","components/AdminPage/ProductDetails.js","components/AdminPage/index.js","App.js","index.js"],"names":["initialData","winX","window","innerWidth","winY","innerHeight","loggedIn","username","openShopCart","openNavExt","dataReducer","state","action","type","Error","StoreContext","createContext","StoreProvider","props","useReducer","dispatch","a","oldSession","localStorage","getItem","fetch","then","r","json","res","error","console","log","removeItem","useEffect","handleOldSession","handleResize","addEventListener","removeEventListener","Provider","value","useStoreContext","useContext","Navbar","store","updateStore","useState","isAdmin","setIsAdmin","sessionId","handleLogout","checkUser","className","exact","to","activeClassName","onClick","NavbarExtension","navExt","useRef","visible","setVisible","closeExt","logout","current","classList","add","setTimeout","remove","ref","style","textAlign","ShoppingCart","shoppingCart","cartData","setCartData","setStore","refreshCart","user","cart","method","headers","body","JSON","stringify","status","id","cartId","length","map","item","transform","heading","slice","productId","price","handleCancel","_id","total","forEach","entry","toFixed","calculateTotal","ShopPage","banner","setBanner","products","setProducts","desc","img","productData","init","autoPlay","centerMode","centerSlidePercentage","infiniteLoop","transitionTime","interval","showArrows","showThumbs","showStatus","each","idx","src","alt","product","image","RegisterPage","emailErr","setEmailErr","pwErr","setPwErr","successMsg","setSuccessMsg","nameInputDiv","emailInputDiv","pwInputDiv","repwInputDiv","checkValidateEmail","email","RegExp","test","checkValidatePassword","password","repassword","e","preventDefault","userInfo","name","emailAlreadyExists","onSubmit","submitForm","htmlFor","placeholder","LoginPage","err","setErr","pw","setItem","location","replace","ProductPage","useParams","setProduct","otherProducts","setOtherProducts","data","otherProductsData","randomProducts","getRandomProducts","arr","temp","index","shuffled","i","Math","floor","random","description","linkOtherProduct","reviews","review","rating","AccessDenied","ProductList","setTotal","unitsSold","profit","trans","setPopupProduct","scope","TransactionsList","setTrans","refreshData","transData","filter","userId","productName","Date","updatedAt","toLocaleDateString","toLocaleTimeString","transSold","Charts","setTransData","newData","push","productid","bought","sold","cancelled","BarChart","width","height","XAxis","dataKey","tick","YAxis","Tooltip","Legend","Bar","fill","ProductDetails","setHeading","setPrice","setDescription","images","setImages","updateImagesArr","newArr","target","scrollTo","onChange","rows","AdminPage","hasAccess","setAccess","popupProduct","prodRes","transRes","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6777c878.chunk.js","sourcesContent":["import { createContext, useReducer, useContext, useEffect } from \"react\";\r\n\r\nconst initialData = {\r\n  winX:window.innerWidth, \r\n  winY:window.innerHeight,\r\n  loggedIn:false,\r\n  username: \"[User]\",\r\n  openShopCart:false,\r\n  openNavExt:false\r\n};\r\n\r\n/*! IMPORTANT all your reducer functionality goes here */\r\nconst dataReducer = (state, action) => {\r\n  switch (action.type) {\r\n  case \"resize\":\r\n    return {...state, winX:window.innerWidth, winY:window.innerHeight};\r\n  case \"logout\":\r\n    return {...state, loggedIn:false};\r\n  case \"login\":\r\n    return {...state, loggedIn:true};\r\n  case \"toggle-shop-cart\":\r\n    return {...state, openShopCart: !state.openShopCart};\r\n  case \"toggle-nav-ext\":\r\n    return {...state, openNavExt: !state.openNavExt};\r\n  default:\r\n    throw new Error(`Invalid action type: ${action.type}`);\r\n  }\r\n}\r\n\r\nconst StoreContext = createContext();\r\n\r\nconst StoreProvider = function(props){\r\n  const [state, dispatch] = useReducer( dataReducer, initialData );\r\n  // when a new session launches\r\n  useEffect(() => {\r\n    // check if user already logged in before\r\n    handleOldSession();\r\n  }, [])\r\n\r\n  async function handleOldSession() {\r\n    const oldSession = localStorage.getItem(\"sessionId\");\r\n    const res = await fetch(`/api/users/${oldSession}`).then(r => r.json());\r\n    if (res.error) {\r\n      console.log(res.error);\r\n      localStorage.removeItem(\"sessionId\");\r\n    }\r\n    else dispatch({type:\"login\"});\r\n  }\r\n\r\n  useEffect(() => {\r\n    // add listeners for window resize\r\n    function handleResize() { dispatch({type:\"resize\"}) };\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  })\r\n  return <StoreContext.Provider value={[state, dispatch]} {...props} />;\r\n}\r\n\r\nconst useStoreContext = function(){ return useContext(StoreContext) };\r\n\r\nexport { StoreProvider, useStoreContext }","import { useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { useStoreContext } from \"./GlobalStore\";\r\n\r\nfunction Navbar() {\r\n\r\n  const [store, updateStore] = useStoreContext();\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    checkUser();\r\n  },[])\r\n\r\n  async function checkUser() {\r\n    const sessionId = localStorage.getItem(\"sessionId\");\r\n    if (sessionId) {\r\n      const res = await fetch(`/api/users/${sessionId}`).then(r => r.json());\r\n      if (res.isAdmin) setIsAdmin(true);\r\n    }\r\n  }\r\n\r\n  async function handleLogout() {\r\n    if (store.openShopCart) updateStore({type:\"toggle-shop-cart\"});\r\n    const sessionId = localStorage.getItem(\"sessionId\");\r\n    localStorage.removeItem(\"sessionId\");\r\n    await fetch(`/api/logout/${sessionId}`);\r\n    updateStore({type:\"logout\"});\r\n  }\r\n\r\n  function openShopCart() {\r\n    updateStore({type:\"toggle-shop-cart\"});\r\n  }\r\n\r\n  function openNavExt() {\r\n    updateStore({type:\"toggle-nav-ext\"});\r\n  }\r\n\r\n  function renderNavigation() {\r\n    if (store.winX > 800 && store.loggedIn) return(\r\n      <div className=\"navbar-nav\">\r\n        <NavLink exact to=\"/\" className=\"nav-link\" activeClassName=\"disabled\">Home</NavLink>\r\n        {isAdmin ? <NavLink to=\"/admin\" className=\"nav-link\" activeClassName=\"disabled\">Administration</NavLink> : \r\n        <button className=\"btn nav-link\" onClick={openShopCart}>Shopping Cart</button>\r\n        }\r\n        <button className=\"btn nav-link\" onClick={handleLogout}>Logout</button>\r\n      </div>\r\n    )\r\n    else if (store.winX > 800) return (\r\n      <div className=\"navbar-nav\">\r\n        <NavLink exact to=\"/\" className=\"nav-link\" activeClassName=\"disabled\">Home</NavLink>\r\n        <NavLink to=\"/register\" className=\"nav-link\" activeClassName=\"disabled\">Register</NavLink>\r\n        <NavLink to=\"/login\" className=\"nav-link\" activeClassName=\"disabled\">Login</NavLink>\r\n      </div>\r\n    )\r\n    else return (\r\n      <div className=\"navbar-nav\">\r\n        <button className=\"btn navbar-toggler-icon\" onClick={openNavExt}></button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return(\r\n    <nav className=\"navbar navbar-expand navbar-dark bg-dark main-nav\">\r\n      <div className=\"container-fluid\">\r\n        {/* Logo/Branding */}\r\n        <span className=\"navbar-brand\">Peak Everest Furnitures</span>\r\n        {/* Navlinks */}\r\n        {renderNavigation()}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Navbar;","import { useRef, useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { useStoreContext } from \"./GlobalStore\";\r\n\r\nfunction NavbarExtension() {\r\n\r\n  const navExt = useRef(null);\r\n  const [store, updateStore] = useStoreContext();\r\n  const [visible, setVisible] = useState(false);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (store.openNavExt) setVisible(true);\r\n    else if (visible && !store.openNavExt) {\r\n      navExt.current.classList.add(\"nav-ext-close\");\r\n      setTimeout(() => { \r\n        navExt.current.classList.remove(\"nav-ext-close\");\r\n        setVisible(false);\r\n      }, 290);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [store.openNavExt])\r\n\r\n  useEffect(() => {\r\n    checkUser();\r\n  },[])\r\n\r\n  async function checkUser() {\r\n    const sessionId = localStorage.getItem(\"sessionId\");\r\n    if (sessionId) {\r\n      const res = await fetch(`/api/users/${sessionId}`).then(r => r.json());\r\n      if (res.isAdmin) setIsAdmin(true);\r\n    }\r\n  }\r\n\r\n  function closeExt() { updateStore({type:\"toggle-nav-ext\"}); }\r\n\r\n  function openShopCart() {\r\n    updateStore({type:\"toggle-shop-cart\"});\r\n    updateStore({type:\"toggle-nav-ext\"});\r\n  }\r\n\r\n  function logout() {\r\n    updateStore({type:\"logout\"});\r\n    updateStore({type:\"toggle-nav-ext\"});\r\n    if (store.openShopCart) updateStore({type:\"toggle-shop-cart\"});\r\n  }\r\n\r\n  function renderNavLinks() {\r\n    if (store.loggedIn) return(\r\n      <div className=\"navbar-nav col\">\r\n        <NavLink exact to=\"/\" className=\"nav-link\" activeClassName=\"disabled\" onClick={closeExt}>Home</NavLink>\r\n        {isAdmin ? <NavLink to=\"/admin\" className=\"nav-link\" activeClassName=\"disabled\">Administration</NavLink> : \r\n        <button className=\"btn nav-link\" onClick={openShopCart} style={{textAlign:\"right\"}}>Shopping Cart</button>\r\n        }\r\n        <button className=\"btn nav-link\" onClick={logout} style={{textAlign:\"right\"}}>Logout</button>\r\n      </div>\r\n    )\r\n    else return (\r\n      <div className=\"navbar-nav col\">\r\n        <NavLink exact to=\"/\" className=\"nav-link\" activeClassName=\"disabled\" onClick={closeExt}>Home</NavLink>\r\n        <NavLink to=\"/register\" className=\"nav-link\" activeClassName=\"disabled\" onClick={closeExt}>Register</NavLink>\r\n        <NavLink to=\"/login\" className=\"nav-link\" activeClassName=\"disabled\" onClick={closeExt}>Login</NavLink>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (visible && store.winX < 800) return(\r\n    <div className=\"navbar navbar-dark bg-dark nav-extend\" ref={navExt}>\r\n      <div className=\"container-fluid\">\r\n        {renderNavLinks()}\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n  else {\r\n    return null;\r\n  }\r\n\r\n}\r\n\r\nexport default NavbarExtension;","import { useState, useEffect, useRef } from 'react';\r\nimport { useStoreContext } from './GlobalStore';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction ShoppingCart() {\r\n\r\n  const shoppingCart = useRef(null);\r\n  const [visible, setVisible] = useState(false);\r\n  const [cartData, setCartData] = useState([]);\r\n  const [store, setStore] = useStoreContext();\r\n\r\n  useEffect(() => {\r\n    if (store.openShopCart) {\r\n      refreshCart();\r\n      setVisible(true);\r\n    }\r\n    else if (visible && !store.openShopCart) {\r\n      shoppingCart.current.classList.add(\"shop-cart-close\");\r\n      setTimeout(() => { \r\n        shoppingCart.current.classList.remove(\"shop-cart-close\");\r\n        setVisible(false);\r\n      }, 290);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [store.openShopCart])\r\n\r\n  async function refreshCart() {\r\n    // refresh cart data\r\n    let sessionId = localStorage.getItem(\"sessionId\");\r\n    const user = await fetch(`/api/users/${sessionId}`).then(r => r.json());\r\n    setCartData(user.cart);\r\n  }\r\n\r\n  async function handleCheckout() {\r\n    console.log(\"checkout all shopping cart items\");\r\n    let sessionId = localStorage.getItem(\"sessionId\");\r\n    // REMOVE ALL ITEMS from shopping cart/make new transactions\r\n    const res = await fetch(`/api/users/${sessionId}`, {\r\n      method: \"PUT\",\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ status:\"CHECKOUT\" })\r\n    });\r\n    refreshCart();\r\n    console.log(res);\r\n  }\r\n\r\n  async function handleCancel(id) {\r\n    // Remove entry from shopping cart\r\n    let sessionId = localStorage.getItem(\"sessionId\");\r\n    await fetch(`/api/users/${sessionId}`, {\r\n      method: \"PUT\",\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ cartId:id, status:\"CANCEL\" })\r\n    });\r\n    refreshCart();\r\n  }\r\n\r\n  function calculateTotal() {\r\n    let total = 0;\r\n    cartData.forEach(entry => {\r\n      total += entry.price;\r\n    })\r\n    return total.toFixed(2);\r\n  }\r\n\r\n  if (visible) {\r\n    return(\r\n      <>\r\n      <div className=\"shop-cart-body\" ref={shoppingCart}>\r\n        <h4 className=\"mt-2 mb-3\">Shopping Cart</h4>\r\n        <ul className=\"list-group\">\r\n          {cartData.length ? '' : <span className=\"text-muted\">No items in your cart </span> }\r\n          {cartData.map(item => \r\n            <li className=\"list-group-item d-flex shop-cart-item\" key={item._id}>\r\n              <div className=\"flex-fill ms-2 mt-1\" style={{transform:\"rotate(0)\"}}>\r\n                <p className=\"card-text\">\r\n                  {item.heading.length < 23 ? item.heading : item.heading.slice(0,22) + \"...\"}\r\n                </p>\r\n                <Link className=\"stretched-link\" to={\"/product/\"+item.productId} \r\n                  onClick={() => setStore({type:\"toggle-shop-cart\"})}>Go to product page</Link>\r\n              </div>\r\n              <div className=\"mt-auto\">\r\n                <p className=\"text-end me-2\">${item.price}</p>\r\n                <button className=\"btn btn-sm link-danger\" onClick={() => handleCancel(item._id)}>Remove</button>\r\n              </div>\r\n            </li>\r\n          )}\r\n        </ul>\r\n        <div className=\"checkout-container\">\r\n          <p>Total: ${calculateTotal()} </p>\r\n          <button className=\"btn btn-light\" onClick={handleCheckout}>Checkout</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"back-cover\" onClick={() => setStore({type:\"toggle-shop-cart\"})}></div>\r\n      </>\r\n    )\r\n  }\r\n  else return null;\r\n  \r\n}\r\n\r\nexport default ShoppingCart;","import { useEffect, useState } from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport { Carousel } from \"react-responsive-carousel\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport \"./shop.css\"\r\n\r\nfunction ShopPage() {\r\n\r\n  const [banner, setBanner] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  useEffect(function () {\r\n    init();\r\n  }, []);\r\n\r\n  async function init() {\r\n    // fetch banner info\r\n    const bannerData = [\r\n      {heading:\"Banner #1\", desc:\"Extra info 1\", img:\"https://www.hermanmiller.com/content/dam/hmicom/page_assets/products/categories/gaming/it_cmp_gaming_motia_gaming_table.jpg\"},\r\n      {heading:\"Banner #2\", desc:\"Extra info 2\", img:\"https://i.gyazo.com/cc114cc01d65fa4820be8652151b61b0.png\"},\r\n      {heading:\"Banner #3\", desc:\"Extra info 3\", img:\"https://i.gyazo.com/97b764beb0a96af871fec590c7e217c3.png\"}\r\n    ];\r\n    setBanner(bannerData);\r\n    // fetch product info\r\n    const productData = await fetch('/api/products').then(r=>r.json());\r\n    setProducts(productData);\r\n  }\r\n\r\n  return(\r\n    <div className=\"shop-page mt-3\">\r\n      <Carousel autoPlay centerMode centerSlidePercentage={100} infiniteLoop transitionTime={800} interval={3000}\r\n        showArrows={false} showThumbs={false} showStatus={false}>\r\n        {/* create slides */}\r\n        {banner.map((each,idx) => \r\n          <div key={idx} className=\"slide-item\">\r\n            <div className=\"desc\">\r\n              <h3>{each.heading}</h3>\r\n              <p>{each.desc}</p>\r\n            </div>\r\n            <img src={each.img} alt=\"product\" />\r\n          </div>\r\n        )}\r\n      </Carousel>\r\n      <hr/>\r\n      <div className=\"all-products-list mb-3\">\r\n        <h1>All Products</h1>\r\n          <div className=\"row\">\r\n            {products && products.map((product, idx) => \r\n              <div key={idx} className=\"col-12 col-sm-6 col-md-4 col-lg-3 mb-2\">\r\n                <div className=\"card\">\r\n                  <div className=\"shop-card-img\">\r\n                    <img src={product.image[0]} className=\"card-img-top img-fluid\" alt={product.heading} />\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{product.heading}</h5>\r\n                    <p className=\"card-text\">${product.price}</p>\r\n                    <Link to={\"/product/\"+product._id} className=\"stretched-link\">See Product</Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ShopPage;","import { useState, useRef } from 'react';\r\n\r\nfunction RegisterPage() {\r\n\r\n  const [emailErr, setEmailErr] = useState('');\r\n  const [pwErr, setPwErr] = useState('');\r\n  const [successMsg, setSuccessMsg] = useState('');\r\n  const nameInputDiv = useRef(null);\r\n  const emailInputDiv = useRef(null);\r\n  const pwInputDiv = useRef(null);\r\n  const repwInputDiv = useRef(null);\r\n\r\n  function checkValidateEmail() {\r\n    const email = emailInputDiv.current.value;\r\n    // check if email is formatted properly\r\n    const regex = new RegExp('.+@.+\\\\..+');\r\n    if (!regex.test(email)) {\r\n      emailInputDiv.current.classList.add(\"is-invalid\");\r\n      setEmailErr('Invalid email format');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function checkValidatePassword() {\r\n    const [password, repassword] = [pwInputDiv.current.value, repwInputDiv.current.value];\r\n    // check if password was entered\r\n    if (password.length < 1) {\r\n      pwInputDiv.current.classList.add(\"is-invalid\");\r\n      repwInputDiv.current.classList.add(\"is-invalid\");\r\n      setPwErr(\"Please enter a password\");\r\n      return false;\r\n    }\r\n    // check if passwords are the same\r\n    if (password !== repassword) {\r\n      pwInputDiv.current.classList.add(\"is-invalid\");\r\n      repwInputDiv.current.classList.add(\"is-invalid\");\r\n      setPwErr(\"Passwords do not match\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n    console.log(\"Attempting to sign up\");\r\n    // reset errors\r\n    emailInputDiv.current.classList.remove(\"is-invalid\");\r\n    pwInputDiv.current.classList.remove(\"is-invalid\");\r\n    repwInputDiv.current.classList.remove(\"is-invalid\");\r\n    setEmailErr(\"\");\r\n    setPwErr(\"\");\r\n    setSuccessMsg(\"\");\r\n    // validate email/password\r\n    if (!checkValidateEmail()) return;\r\n    if (!checkValidatePassword()) return;\r\n    // submit user info to DB\r\n    const userInfo = {\r\n      name: nameInputDiv.current.value,\r\n      email: emailInputDiv.current.value,\r\n      password: pwInputDiv.current.value\r\n    };\r\n    const res = await fetch('/api/users', {\r\n      method: \"POST\",\r\n      body: JSON.stringify(userInfo),\r\n      headers: {\"Content-Type\": \"application/json\"}\r\n    }).then(r => r.json());\r\n    // handle error\r\n    if (res.emailAlreadyExists) {\r\n      emailInputDiv.current.classList.add(\"is-invalid\");\r\n      setEmailErr(\"This account already exists\");\r\n    }\r\n    else setSuccessMsg(\"Registration successful.\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"card mt-3 login-body\">\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title mb-3\">Sign Up</h5>\r\n        <form onSubmit={(e) => submitForm(e)}>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"displayNameInput\" className=\"form-label\">Display name</label>\r\n            <input name='name' type=\"text\" className=\"form-control\" id=\"displayNameInput\" \r\n              placeholder=\"name\" ref={nameInputDiv} />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"emailInput\" className=\"form-label\">Email</label>\r\n            <input name='email' type=\"email\" className=\"form-control\" id=\"emailInput\" \r\n              placeholder=\"name@example.com\" ref={emailInputDiv} />\r\n            {emailErr.length > 0 ? <span className=\"invalid-feedback\">{emailErr}</span> : \"\" }\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"passwordInput\" className=\"form-check-label\" >Password</label>\r\n            <input name='password' type=\"password\" className=\"form-control\" id=\"passwordInput\" \r\n              placeholder=\"********\" ref={pwInputDiv} />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"passwordReinput\" className=\"form-check-label\" >Confirm Password</label>\r\n            <input name='repassword' type=\"password\" className=\"form-control\" id=\"passwordReinput\" \r\n              placeholder=\"********\" ref={repwInputDiv} />\r\n            {pwErr.length > 0 ? <span className=\"invalid-feedback\">{pwErr}</span> : \"\" }\r\n          </div>\r\n          <div className=\"text-center mb-3\">\r\n            {successMsg.length > 0 ? <p className=\"d-block valid-feedback\">{successMsg}</p> : \"\" }\r\n            <button className=\"btn btn-dark\">Register</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default RegisterPage;","import { useRef, useState } from \"react\";\r\nimport { useStoreContext } from '../GlobalStore';\r\nimport './login.css';\r\n\r\nfunction LoginPage() {\r\n\r\n  const [, setStore] = useStoreContext();\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  const email = useRef(null);\r\n  const pw = useRef(null);\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n    setErr('');\r\n    console.log(`trying to login`);\r\n    let res = await fetch(\"/api/login\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ email:email.current.value, password:pw.current.value }),\r\n      headers: {\"Content-Type\": \"application/json\"}\r\n    }).then(r => r.json());\r\n    if (res.error) setErr(res.error);\r\n    else {\r\n      console.log(res);\r\n      localStorage.setItem(\"sessionId\", res.sessionId);\r\n      setStore({type:\"login\"});\r\n      window.location.replace(\"/\");\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"card mt-3 login-body\">\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title mb-3\">Login</h5>\r\n        <form onSubmit={e => submitForm(e)}>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"emailInput\" className=\"form-label\">Email address</label>\r\n            <input type=\"email\" className=\"form-control\" id=\"emailInput\" ref={email} placeholder=\"name@example.com\" />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"passwordInput\" className=\"form-label\">Password</label>\r\n            <input type=\"password\" className=\"form-control\" ref={pw} id=\"passwordInput\" placeholder=\"********\" />\r\n            {err.length>0 ? <span className=\"login-err\">Error: {err}</span> : \"\"}\r\n          </div>\r\n          <div className=\"text-center mb-3\">\r\n            <button className=\"btn btn-dark\">Login</button>\r\n          </div>\r\n        </form>\r\n        <div className=\"text-center mb-3\">\r\n          <button className=\"btn btn-secondary\">Create a new account</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginPage;","import { useEffect, useState } from 'react';\r\nimport { useParams } from \"react-router\"\r\nimport './productPage.css'\r\n\r\nfunction ProductPage() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState({});\r\n  const [otherProducts, setOtherProducts] = useState([])\r\n\r\n  useEffect(() => {\r\n    init()\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  async function init() {\r\n    const data = await fetch(`/api/products/${id}`).then(r => r.json());\r\n    setProduct(data);\r\n\r\n    const otherProductsData = await fetch('/api/products').then(r=> r.json());\r\n    const randomProducts = getRandomProducts(otherProductsData);\r\n    setOtherProducts(randomProducts);\r\n  }\r\n\r\n  function linkOtherProduct(id) {\r\n    window.location.replace(\"/product/\"+id);\r\n  }\r\n\r\n  function getRandomProducts(arr){\r\n    var shuffled = arr.slice(0), i = arr.length, temp, index;\r\n    while (i--) {\r\n        index = Math.floor((i + 1) * Math.random());\r\n        temp = shuffled[index];\r\n        shuffled[index] = shuffled[i];\r\n        shuffled[i] = temp;\r\n    }\r\n    return shuffled.slice(0, 4);\r\n  }\r\n\r\n  async function handleCheckout() {\r\n    let sessionId = localStorage.getItem(\"sessionId\");\r\n    if (sessionId) {\r\n      // make new entry in cart\r\n      await fetch(`/api/users/${sessionId}`, {\r\n        method: \"PUT\",\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ \r\n          productId:id, \r\n          heading:product.heading, \r\n          price:product.price, \r\n          status:\"BUYING\" \r\n        })\r\n      });\r\n    }\r\n    else {\r\n      // goto login screen\r\n      window.location.replace(\"/login\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"card mb-3 card-background\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6\">\r\n            {/* <img src={product.img} alt={product.name} */}\r\n            {product.image && product.image.map(img =>\r\n              <div className=\"col-lg-6 col-md-12 col-sm-12 outline d-flex align-items-stretch margin\">\r\n                <div className=\"card\">\r\n                  <img src={img} alt={product.name} />\r\n                </div>\r\n              </div>)}\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <div className=\"card-body\">\r\n              <h1 className=\"card-title\">{product.heading}</h1>\r\n              <h5>${product.price}</h5>\r\n              <p className=\"card-text\">Description:</p>\r\n              <p className=\"card-text\">{product.description}</p>\r\n              <br/>\r\n              <div className=\"row\">\r\n                <h5>View Other Products</h5>\r\n                {otherProducts && otherProducts.map((product, idx) => \r\n                  <div key={idx} className=\"col-3 col-sm-3 col-md-3 col-lg-3\">\r\n                    <div className=\"card cardBackground\">\r\n                      <button onClick={() => linkOtherProduct(product._id)} className=\"btn stretched-link\">\r\n                      <img src={product.image[0]} className=\"card-img-top img-fluid\" alt={product.heading} />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <button className=\"btn btn-dark product-button\" onClick={handleCheckout}>Add to Cart</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr/>\r\n      <h1>Ratings and Reviews</h1>\r\n      {product.reviews && product.reviews.map(review =>\r\n        <div>\r\n          <div className=\"card border-light mb-3\">\r\n          <div className=\"card-header\">{review.name}</div>\r\n          <div className=\"card-body\">\r\n            <h5 className=\"card-title\">Rating: {review.rating}/5</h5>\r\n            <p className=\"card-text\">{review.review}</p>\r\n          </div>\r\n        </div>\r\n        </div>\r\n        )}\r\n    </div>\r\n    \r\n  )\r\n}\r\n\r\nexport default ProductPage;","\r\nfunction AccessDenied() {\r\n  return(\r\n    <div className=\"mt-3\" style={{textAlign:\"center\"}}>\r\n      <h2 className=\"mx-auto\">Access Denied</h2>\r\n      <p>You do not have access to this page. Please login with an administrative account.</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AccessDenied;","import { useEffect, useState } from \"react\";\r\n\r\nfunction ProductList(props) {\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let productData = props.products;\r\n    // consolidate data\r\n    let total = 0;\r\n    productData.forEach(product => {\r\n      product.unitsSold = 0;\r\n      product.profit = 0;\r\n      props.trans.forEach(entry => {\r\n        if (product._id === entry.productId && (entry.status===\"BOUGHT\" || entry.status===\"SOLD\")) product.unitsSold += 1;\r\n      })\r\n      product.profit = product.unitsSold*product.price;\r\n      total += product.profit;\r\n    })\r\n    // set extended products array\r\n    setProducts(productData);\r\n    setTotal(total.toFixed(2));\r\n  }, [props])\r\n\r\n  return(\r\n    <div className=\"admin-product-list table-responsive\">\r\n      <div className=\"header\">\r\n        <h5>Product List</h5> \r\n        <button className=\"btn btn-sm btn-dark\" onClick={() => props.setPopupProduct({})}>Add New Product</button>\r\n      </div>\r\n      \r\n      <table className=\"table table-sm\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">ID</th>\r\n            <th scope=\"col\">Name</th>\r\n            <th scope=\"col\">Price</th>\r\n            <th scope=\"col\">Units Sold</th>\r\n            <th scope=\"col\">Profit</th>\r\n            <th scope=\"col\"></th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {products.map((product,idx) => {\r\n            return <tr key={idx}>\r\n              <td>{product._id}</td>\r\n              <th>{product.heading}</th>\r\n              <td>${product.price}</td>\r\n              <td>{product.unitsSold}</td>\r\n              <td>${product.profit}</td>\r\n              <td className=\"text-end\">\r\n                <button className=\"btn btn-sm btn-outline-dark\" onClick={() => props.setPopupProduct(product)}>Edit</button>\r\n              </td>\r\n            </tr>\r\n          })}\r\n        </tbody>\r\n\r\n        <tfoot>\r\n          <tr>\r\n            <td></td><td></td><td></td>\r\n            <th scope=\"row\">Total:</th>\r\n            <td>${total}</td>\r\n            <td></td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductList;","import { useEffect, useState } from \"react\";\r\n\r\nfunction TransactionsList(props) {\r\n\r\n  const [trans, setTrans] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // remove transactions that are marked BUYING, SOLD, or CANCELLED\r\n    let transData = props.trans.filter(entry => entry.status === \"BOUGHT\");\r\n    setTrans(transData);\r\n  },[props])\r\n\r\n  async function transSold(id) {\r\n    console.log(\"set transaction with id \" + id + \" to status SOLD\");\r\n    // update status of transaction to SOLD\r\n    const res = await fetch(`/api/transactions/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ status:\"SOLD\" })\r\n    });\r\n    console.log(res);\r\n    props.refreshData();\r\n  }\r\n\r\n  return(\r\n    <div className=\"admin-trans-list table-responsive\">\r\n      <h5>Ongoing Transactions</h5>\r\n      <table className=\"table table-sm\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">Transaction ID</th>\r\n            <th scope=\"col\">User ID</th>\r\n            <th scope=\"col\">Product Name</th>\r\n            <th scope=\"col\">Time of sale</th>\r\n            <th scope=\"col\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {trans.map(entry => \r\n            <tr key={entry._id}>\r\n              <td>{entry._id}</td>\r\n              <td>{entry.userId}</td>\r\n              <th>{entry.productName}</th>\r\n              <td>{new Date(entry.updatedAt).toLocaleDateString()} {new Date(entry.updatedAt).toLocaleTimeString()}</td>\r\n              <td className=\"text-end\">\r\n                <button className=\"btn btn-sm btn-outline-dark\" onClick={() => transSold(entry._id)}>\r\n                  Delivery Sent\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TransactionsList;","import { useEffect, useState } from 'react';\r\nimport { BarChart, XAxis, YAxis, Bar, Tooltip, Legend } from 'recharts';\r\n\r\nfunction Charts(props) {\r\n\r\n  const [transData, setTransData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let newData = [];\r\n    props.products.forEach(product => {\r\n      newData.push({ productid:product._id, bought:0, sold:0, cancelled:0 });\r\n    });\r\n    props.trans.forEach(entry => {\r\n      newData.forEach(data => {\r\n        if (data.productid === entry.productId && entry.status === \"BOUGHT\") data.bought++;\r\n        else if (data.productid === entry.productId && entry.status === \"SOLD\") data.sold++;\r\n        else if (data.productid === entry.productId && entry.status === \"CANCELLED\") data.cancelled++;\r\n      })\r\n    })\r\n    setTransData(newData);\r\n  }, [props])\r\n\r\n  return(\r\n    <div className=\"admin-charts\">\r\n      <h5 className=\"card-text\">Sales Info</h5>\r\n        <BarChart width={800} height={300} data={transData}>\r\n          <XAxis dataKey=\"productid\" tick={false} />\r\n          <YAxis />\r\n          <Tooltip />\r\n          <Legend />\r\n          <Bar dataKey=\"bought\" fill=\"#8884d8\" />\r\n          <Bar dataKey=\"sold\" fill=\"#82ca9d\" />\r\n          <Bar dataKey=\"cancelled\" fill=\"#ff2525\" />\r\n        </BarChart>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Charts;","import { useEffect, useState } from \"react\";\r\n\r\nfunction ProductDetails(props) {\r\n\r\n  const [heading, setHeading] = useState(props.product.heading);\r\n  const [price, setPrice] = useState(props.product.price);\r\n  const [description, setDescription] = useState(props.product.description);\r\n  const [images, setImages] = useState(props.product.image || []);\r\n\r\n  useEffect(() => {\r\n    // scroll to top on load\r\n    window.scrollTo(0,80);\r\n  }, [props])\r\n\r\n  async function handleAdd() {\r\n    console.log(\"Adding this product\");\r\n    const data = {\r\n      heading: heading,\r\n      price: price,\r\n      description: description,\r\n      images: images\r\n    }\r\n    const res = await fetch(\"/api/products\", {\r\n      method:\"POST\",\r\n      headers: { 'Content-Type': 'application/json', 'sessionid':localStorage.getItem(\"sessionId\") },\r\n      body: JSON.stringify(data)\r\n    }).then(r => r.json());\r\n    console.log(res);\r\n\r\n    props.refreshData();\r\n    props.setPopupProduct(null);\r\n  }\r\n\r\n  async function handleUpdate() {\r\n    console.log(\"Updating product\", props.product._id);\r\n    const data = {\r\n      heading: heading,\r\n      price: price,\r\n      description: description,\r\n      images: images\r\n    }\r\n    const res = await fetch(`/api/products/${props.product._id}`, {\r\n      method:\"PUT\",\r\n      headers: { 'Content-Type': 'application/json', 'sessionid':localStorage.getItem(\"sessionId\") },\r\n      body: JSON.stringify(data)\r\n    }).then(r => r.json());\r\n    console.log(res);\r\n\r\n    props.refreshData();\r\n    props.setPopupProduct(null);\r\n  }\r\n\r\n  async function handleDelete() {\r\n    console.log(\"Deleting product\", props.product._id);\r\n    const res = await fetch(`/api/products/${props.product._id}`, {\r\n      method:\"DELETE\",\r\n      headers: { 'sessionid':localStorage.getItem(\"sessionId\") },\r\n    }).then(r => r.json());\r\n    console.log(res);\r\n\r\n    props.refreshData();\r\n    props.setPopupProduct(null);\r\n  }\r\n\r\n  function updateImagesArr(e, idx) {\r\n    let newArr = images;\r\n    newArr[idx] = e.target.value;\r\n    setImages([...newArr]);\r\n  }\r\n\r\n  return(\r\n    <>\r\n      <div className=\"product-info-popup\">\r\n        <div className=\"card\">\r\n          <div className=\"card-body\">\r\n            <h5 className=\"card-title\">Product Information</h5>\r\n            <div className=\"row\">\r\n              <div className=\"col-8 my-auto\">\r\n                <label className=\"form-label\">Product Name</label>\r\n                <input type=\"text\" value={heading} onChange={e => setHeading(e.target.value)} className=\"form-control\" />\r\n              </div>\r\n              <div className=\"col-4\">\r\n                <label className=\"form-label\">Price</label>\r\n                <input type=\"number\" value={price} onChange={e => setPrice(e.target.value)} className=\"form-control\" />\r\n              </div>\r\n              <div className=\"col-12  mb-2\">\r\n                <label className=\"form-label\">Description</label>\r\n                <textarea value={description} onChange={e => setDescription(e.target.value)} \r\n                  rows={4} className=\"form-control\" ></textarea>\r\n              </div>\r\n              <div className=\"col-12 mb-2\">\r\n                <label className=\"form-label\">Pictures (Requires HTTP URLs)</label>\r\n                <input type=\"text\" value={images[0]} onChange={e => updateImagesArr(e, 0)} className=\"form-control mb-2\" />\r\n                <input type=\"text\" value={images[1]} onChange={e => updateImagesArr(e, 1)} className=\"form-control mb-2\" />\r\n                <input type=\"text\" value={images[2]} onChange={e => updateImagesArr(e, 2)} className=\"form-control mb-2\" />\r\n                <input type=\"text\" value={images[3]} onChange={e => updateImagesArr(e, 3)} className=\"form-control mb-2\" />\r\n              </div>\r\n              <div className=\"col-12 mb-2 mx-auto\">\r\n                {props.product._id ? \r\n                  <div className=\"btn-group\">\r\n                    <button className=\"btn btn-dark\" onClick={handleUpdate}>Update Product</button>\r\n                    <button className=\"btn btn-danger\" onClick={handleDelete}>Delete Product</button>\r\n                  </div> :\r\n                  <div className=\"btn-group\">\r\n                    <button className=\"btn btn-dark\" onClick={handleAdd}>Add Product</button>\r\n                    <button className=\"btn btn-danger\" onClick={() => props.setPopupProduct(null)}>Cancel</button>\r\n                  </div>\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"product-info-backdrop\" onClick={() => props.setPopupProduct(null)}></div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductDetails;","import { useEffect, useState } from \"react\";\r\nimport AccessDenied from './AccessDenied';\r\nimport ProductList from './ProductList';\r\nimport TransactionsList from './TransactionsList';\r\nimport Charts from './Charts';\r\nimport ProductDetails from './ProductDetails';\r\nimport './admin.css';\r\n\r\nfunction AdminPage() {\r\n\r\n  const [hasAccess, setAccess] = useState(false);\r\n  const [products, setProducts] = useState([]);\r\n  const [trans, setTrans] = useState([]);\r\n  const [popupProduct, setPopupProduct] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // redirect if userID is not admin user\r\n    async function checkUser() {\r\n      let sessionId = localStorage.getItem(\"sessionId\")\r\n      let res = await fetch(`/api/users/${sessionId}`).then(r => r.json());\r\n      if (res.isAdmin) {\r\n        console.log(\"Welcome admin\");\r\n        setAccess(true);\r\n        refreshData();\r\n      }\r\n      else console.log(\"Access denied\");\r\n    }\r\n    checkUser();\r\n  }, [])\r\n\r\n  async function refreshData() {\r\n    // fetch product info\r\n    const prodRes = await fetch(\"/api/products\").then(r => r.json());\r\n    if (prodRes.error) console.log(prodRes.error);\r\n    else setProducts(prodRes);\r\n    // fetch transaction info\r\n    const transRes = await fetch(\"/api/transactions\", {\r\n      method: \"GET\",\r\n      headers: { \"sessionId\":localStorage.getItem(\"sessionId\") }\r\n    }).then(r => r.json());\r\n    if (transRes.error) console.log(transRes.error);\r\n    else setTrans(transRes);\r\n  }\r\n\r\n  if (hasAccess) return(\r\n    <div className=\"admin-page card my-3\">\r\n      <div className=\"card-header\">\r\n        <h4>Welcome Back [Admin]</h4>\r\n      </div>\r\n      <div className=\"card-body\">\r\n        <Charts products={products} trans={trans} />\r\n        <br/>\r\n        <ProductList products={products} trans={trans} setPopupProduct={setPopupProduct} />\r\n        <TransactionsList products={products} trans={trans} refreshData={refreshData} />\r\n      </div>\r\n      {popupProduct ? <ProductDetails product={popupProduct} setPopupProduct={setPopupProduct} refreshData={refreshData} /> : \"\"}\r\n    </div>\r\n  )\r\n  else return <AccessDenied />\r\n}\r\n\r\nexport default AdminPage;","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { StoreProvider } from './components/GlobalStore';\r\nimport Navbar from './components/Navbar';\r\nimport NavbarExtension from './components/NavbarExtension';\r\nimport ShoppingCart from './components/ShoppingCart';\r\nimport Shop from './components/ShopPage';\r\nimport Register from './components/RegisterPage';\r\nimport Login from './components/LoginPage';\r\nimport ProductPage from './components/ProductPage';\r\nimport AdminPage from './components/AdminPage';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <StoreProvider>\r\n        <Router>\r\n          <Navbar />\r\n          <NavbarExtension />\r\n          <div className=\"container-lg\">\r\n            <Switch>\r\n              <Route exact path=\"/\"><Shop /></Route>\r\n              <Route path=\"/register\"><Register /></Route>\r\n              <Route path=\"/login\"><Login /></Route>\r\n              <Route path=\"/product/:id\"><ProductPage /></Route>\r\n              <Route path=\"/admin\"><AdminPage /></Route>\r\n            </Switch>\r\n          </div>\r\n          <ShoppingCart />\r\n          {/* <Footer /> */}\r\n        </Router>\r\n      </StoreProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}